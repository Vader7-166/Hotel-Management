@model IEnumerable<Hotel_Management.Models.Account>

<div class="table-responsive">
    <table class="table table-flush" id="accounts-table">
        <thead class="thead-light">
            <tr>
                <th class="text-uppercase text-secondary text-xs font-weight-bolder opacity-7">Username</th>
                <th class="text-uppercase text-secondary text-xs font-weight-bolder opacity-7 ps-2">Full Name</th>
                <th class="text-uppercase text-secondary text-xs font-weight-bolder opacity-7 ps-2">Email</th>
                <th class="text-uppercase text-secondary text-xs font-weight-bolder opacity-7 ps-2">Role</th>
                <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var account in Model)
            {
                <tr>
                    <td>
                        <h6 class="mb-0 text-sm px-2 py-1">@account.Username</h6>
                    </td>
                    <td>
                        @* Thử lấy FullName từ Employee, nếu không có thì lấy từ Customer *@
                        <p class="text-sm font-weight-bold mb-0">@(account.Employee?.FullName ?? account.Customer?.FullName ?? "N/A")</p>
                    </td>
                    <td>
                        <p class="text-xs mb-0">@account.Email</p>
                    </td>
                    <td>
                        @if (account.Role == "Admin")
                        {
                            <span class="badge badge-sm bg-gradient-success">Admin</span>
                        }
                        else if (account.Role == "Employee")
                        {
                            <span class="badge badge-sm bg-gradient-info">Employee</span>
                        }
                    </td>
                    <td class="align-middle text-center">
                        @* Nút View *@
                        <a href="@Url.Action("Details", "EmployeeManagement", new { username = account.Username })" class="text-secondary font-weight-bold text-xs me-2 view-details-btn" data-bs-toggle="modal" data-bs-placement="top" title="View Details" data-bs-target="#detailsModal">
                            <i class="material-symbols-rounded">visibility</i>
                        </a>

                        @* Nút Edit *@
                        <a href="@Url.Action("Edit", "EmployeeManagement", new { username = account.Username })" class="text-secondary font-weight-bold text-xs me-2 edit-details-btn" data-bs-toggle="modal" data-bs-placement="top" title="Edit" data-bs-target="#detailsModal"">
                            <i class="material-symbols-rounded">edit</i>
                        </a>

                        @* Nút Delete (giữ nguyên href="#" vì logic JS dùng data-id) *@
                        <a href="#" data-id="@account.Username" data-name="@account.Username" class="text-secondary font-weight-bold text-xs delete-account-btn" title="Delete">
                            <i class="material-symbols-rounded">delete</i>
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

@* Thêm pagination ở đây nếu bạn cần, logic tương tự _CustomerListPartial.cshtml *@
<!-- Pagination -->
<div id="paginationContainer">
    <div class="border-top py-3 px-4">
        <div class="d-flex justify-content-between align-items-center">
            <p class="text-sm mb-0">Page <strong>@ViewBag.currentPage</strong> / <strong>@ViewBag.pageNum</strong></p>
            <nav aria-label="Page navigation">
                <ul class="pagination pagination-sm mb-0">
                    @* <li class="page-item disabled">
                                                <a class="page-link px-3" href="#" tabindex="-1">Previous</a>
                       </li> *@
                    @{
                        int currentPage = ViewBag.currentPage ?? 1;//kiểm tra hiện tại đang ở trang nào, mặc định là 1
                        int pageNum = ViewBag.pageNum ?? 1;//kiểm tra biến tổng số trang để chứa số lượng khách hàng đã lọc
                    }

                    <li class="page-item @(currentPage == 1 ? "disabled" : "")" page="@(currentPage - 1)">
                        @*nếu current page là 1, ở trang đầu, không thể active được, khi nhấn vào sẽ
                                                                                                             truyền giá trị page về cho controller*@
                        <a class="page-link px-3" href="#">Previous</a>
                    </li>

                    @for (int i = 1; i <= pageNum; i++)
                    {
                        <li class="page-item @(i == currentPage ? "active" : "")" page="@i">
                            @*kiểm tra số thứ tự trang hiện tại có bằng currentpage không, nếu có thì để là active*@
                            <a class="page-link" href="#">@i</a>
                        </li>
                    }

                    <li class="page-item @(currentPage == pageNum ? "disabled" : "")" page="@(currentPage + 1)">
                        <a class="page-link px-3" href="#">Next</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
